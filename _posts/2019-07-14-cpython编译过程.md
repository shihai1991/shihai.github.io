---
published: true
layout: post
title: cpython编译过程分析
category: container
tags:
  - cpython
time: '2019.07.14 13:24:00'
excerpt: cpython编译过程入门学习
---


## decode过程介绍

cpython在编译源码过程会先判断source code使用的编码方案，因为不同的编码方式意味着不同的解码过程。
我这里用一个demo来演示一下python是如何来判断编码方案。
```
# 我有一个fab算法文件存放于 /home/shihai/test_fab.py中，具体内容如下所示：
def fab(max):
    n, a, b = 0, 0, 1
    L = []
    while n < max:
        L.append(b)
        a, b = b, a+b
        n = n + 1
    return L

for n in fab(5):
    print n

# 用你的小手点开python编译器并调用tokenizen模块来查看此过程（python默认的编码格式utf-8）
$ ./python
Python 3.9.0a0 (heads/master:c8e7146, Jul 13 2019, 11:42:31)
[GCC 4.8.5 20150623 (Red Hat 4.8.5-36)] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>>import tokenize
>>>fd = open("/home/shihai/test_fab.py", "rb")
>>>encoding, lines = tokenize.detect_encoding(fd.readline)
>>>encoding
'utf-8'
>>>lines
[b'\n', b'def fab(max):\n']
```
